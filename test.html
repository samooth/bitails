<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test Bitails</title>
    	<script type="text/javascript" src="https://bsv.direct/lib/bitails/index.js"></script>	

</head>

<body>
	<h1>Bitails API Wrapper</h1>
<h2>Incluye esto en el header del documento HTML</h2>

<textarea class="code">
<head>
//.....	
	<script type="text/javascript" src="https://bsv.direct/lib/bitails/index.js"></script>	
//.....
</head>
</textarea>

<h2>Inicialización</h2>
<textarea id="networkStatus_code" class="code">
// Para Mainnet
const explorer = new bitails("main");

// o para Testnet
const explorer = new bitails("test");

</textarea>
<hr>
<h2>Estadisticas de la Red</h2>
<h3>explorer.status()</h3>
<textarea  class="code">
let stats = explorer.status().then((estado) => {
	console.log("Estado de Red")
	console.table(estado);
	document.getElementById("networkStatus").innerText=JSON.stringify(estado, null, '\t');
});
</textarea>
<h2>Resupuesta:</h2>

<div id="networkStatus" class="code"></div>
<hr>
<h2>Información de la Red</h2>
<h3>explorer.chainInfo()</h3>

<textarea  class="code">
let stats = explorer.chainInfo().then((info) => {
	console.log("Información de Red")
	console.table(info);
	document.getElementById("networkInfo").innerText=JSON.stringify(info, null, '\t');
});
</textarea>

<h2>Resupuesta:</h2>

<div id="networkInfo" class="code"></div>
<hr>
<h2>Bloque Génesis</h2>
<h3>explorer.blockHeight( heightNumber )</h3>
<textarea  class="code">
explorer.blockHeight(0).then((genesis) => {
    console.log("Hash Bloque Genesis:", genesis.hash)
    console.table(genesis)
	document.getElementById("genesis").innerText=JSON.stringify(genesis, null, '\t')
})
</textarea>
<div id="genesis" class="code"></div>
<hr>
<h2>Último Bloque</h2>
<h3>explorer.blockLatest( )</h3>
<textarea  class="code">
explorer.blockLatest().then((ultimo) => {
    console.log("Último bloque:", ultimo.hash)
    console.log("Número de transacciones: ", ultimo.transactionsDetails.length)
	document.getElementById("latest").innerText=JSON.stringify(ultimo, null, '\t')
	console.table(ultimo)
})
</textarea>                   
<div id="latest" class="code"></div>


    <!--//<script type="text/javascript" src="https://bsv.direct/lib/bitails/indexplorer.js"></script>//-->
    <script type="text/javascript" src="./bitails.browser.js"></script>
    <script type="text/javascript">
    const mainAddress = "16Rcy7RYM3xkPEJr4tvUtL485Fuobi8S7o"

    const mainex = new bitails("main");

    function networkMain(explorer, cb) {
        let stats = explorer.status().then((estadisticas) => {
            console.log("Estado de Red")
            console.table(estadisticas);
            document.getElementById("networkStatus").innerText=JSON.stringify(estadisticas, null, '\t');

            explorer.chainInfo().then((info) => {
                console.table(info)
                document.getElementById("networkInfo").innerText=JSON.stringify(info, null, '\t');

                explorer.blockHeight(0).then((genesis) => {
                    console.log("Hash Bloque Genesis:", genesis.hash)
                    console.table(genesis)
                	document.getElementById("genesis").innerText=JSON.stringify(genesis, null, '\t');

                    explorer.blockLatest().then((ultimo) => {
                        console.log("Último bloque:", ultimo.hash)
                        console.log("Número de transacciones: ", ultimo.transactionsDetails.length)
                		document.getElementById("latest").innerText=JSON.stringify(ultimo.transactionsDetails, null, '\t')
                		console.table(ultimo.transactionsDetails)
                    })
                })
            })

        }).then(() => {
            cb(explorer, mainAddress)
        })
    }

    networkMain(mainex, console.log)
    </script>

<style type="text/css">
	body{
		font-family: monospace;
		text-align: center;
	}	
	h2{
		text-align: left;
		margin-left: 20px;
	}
	hr{
		margin-top: 20px;
	}
	.code{
		background: rgba(0, 0, 0, 0.8);
		color: lime;
		width: 96%;
		min-height: 90px;
		padding: 20px 20px;
		margin-top: 20px;
		overflow-y: visible;
		text-align: left;
		border-radius: 10px;
	}
</style>
</body>

</html>